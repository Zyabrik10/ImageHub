function e(e){document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",(e=>e.preventDefault()))}))}async function t(t){try{const a=await s.fetch({query:t}),{data:r}=a;if(0===r.hits.length)return void Notiflix.Notify.info("Sorry, there are no images matching your search query. Please try again.");Notiflix.Notify.success(`Hooray! We found ${r.totalHits} images.`),i.query=t,i.page=1,o.reach_end=!1,o.isGalleryEnded=!1,r.totalHits>i.per_page&&(o.page+=1);const n=l.createImageList(r.hits);l.gallery.innerHTML=n,e(".gallery__link"),l.galleryLightBox.refresh()}catch(e){Notiflix.Notify.failure("Oops! Something went wrong"),console.error(e)}}function a(e){e.preventDefault(),t(e.currentTarget.searchInput.value.trim())}function r(e){document.querySelectorAll(e).forEach((e=>{e.addEventListener("submit",a.bind(this))}))}async function n(e){const t=document.querySelector(".hero-header"),a=await s.fetch({query:e,orientation:"horizontal",per_page:10,category:e}),{data:r}=a,n=r.hits,i=n[Math.floor(Math.random()*n.length)].largeImageURL;t.style.background="var(--primary-color)",t.style.background=`linear-gradient(90deg, var(--primary-color) 0%, rgba(12,12,0,0.5) 10%, rgba(12,12,0,0.5) 90%, var(--primary-color) 100%), url(${i})`}const i={page:1,query:"",per_page:20},o={reach_end:!1,isGalleryEnded:!1},s=new class{async fetch({query:e,page:t=1,per_page:a,safesearch:r=!1,image_type:n="photo",orientation:o="horizontal",category:s=""}){return a||(a=i.per_page),await this.API.fetch({query:{key:this.API.token,image_type:n,orientation:o,safesearch:r,q:e,page:t,per_page:a,category:s}})}constructor(e){this.API=e}}(new class{async fetch({api:e="",query:t={}}){const a=new URLSearchParams(t),r=`${this.baseURL}${e}/?${a}`;return await axios.get(r)}constructor({baseURL:e,token:t=""}){this.baseURL=e,this.token=t}}({baseURL:"https://pixabay.com/api",token:"35790595-0862ce34bbcdea66fb3b3d261"})),l=new class{createImageList(e){return e.map((e=>this.sliderComponent(e.webformatURL,e.tags,e.largeImageURL))).join("\n")}init(e){this.gallerySelector=e,this.gallery=document.querySelector(this.gallerySelector),this.galleryLightBox=new SimpleLightbox(`${this.gallerySelector} a`,{captionsData:"alt",captionDelay:250})}async add(){try{const t=await s.fetch({query:i.query,page:i.page}),{data:a}=t;if(!o.isGalleryEnded){a.totalHits<=i.per_page*(i.page-1)+a.hits.length&&o.reach_end&&(a.totalHits>=i.per_page&&Notiflix.Notify.info("We're sorry, but you've reached the end of search results."),o.isGalleryEnded=!0);const t=this.createImageList(a.hits);this.gallery.insertAdjacentHTML("beforeend",t),e(".gallery__link"),this.galleryLightBox.refresh()}}catch(e){Notiflix.Notify.failure("Oops! Something went wrong"),console.error(e)}}constructor(e){this.sliderComponent=e}}((function(e,t,a){return`\n<a href="${e}" class="gallery__link flex-container-item">\n    <img src="${e}" alt="${t}" loading="lazy" data-source="${a}" />\n</a>\n`})),c=["cat","forest","car","steampunk","ocean","flower","sunrise","moon","mountain","sunset"],g=c[Math.floor(Math.random()*c.length)],h=document.querySelector(".main-slider-section").getBoundingClientRect().top,y=document.querySelector(".anchor");window.addEventListener("load",(function(){n(g),l.init(".gallery"),r("#search-form"),t(g),window.addEventListener("scroll",_.throttle((()=>{window.scrollY+innerHeight>=l.gallery.scrollHeight&&!o.isGalleryEnded?(i.page+=1,l.add(i.query,i.page),o.reach_end=!0):o.reach_end=!1,window.scrollY+innerHeight>=h+1.5*innerHeight?!y.classList.contains("active")&&y.classList.add("active"):y.classList.contains("active")&&y.classList.remove("active")}),500))}));
//# sourceMappingURL=index.90c22fb0.js.map
