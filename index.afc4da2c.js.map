{"mappings":"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","sources":["src/js/utility/initForms.js","src/js/utility/initHeroHeaderRandomBackground.js","src/js/utility/preventItemsClick.js","src/js/utility/searchAndRender.js","src/js/config/global.js","src/js/class/PixabayAPI.js","src/js/class/API.js","src/js/class/LightboxGallary.js","src/js/components/MainSlider/MainSlider.js","src/index.js"],"sourcesContent":["function onSubmit(e) {\n  e.preventDefault();\n\n  let input_value = e.currentTarget.searchInput.value.trim();\n\n  searchAndRender(input_value);\n}\n\nexport default function initForms(selector) {\n  const forms = document.querySelectorAll(selector);\n  forms.forEach(form => {\n    form.addEventListener('submit', onSubmit.bind(this));\n  });\n}\n","import { imageAPI } from '../config';\n\nexport default async function initHeroHeaderRandomBackground(request) {\n  const heroHeader = document.querySelector('.hero-header');\n  const response = await imageAPI.fetch({\n    query: request,\n    orientation: 'horizontal',\n    per_page: 10,\n    category: request,\n  });\n\n  const { data } = response;\n  const images = data.hits;\n\n  const imageURL =\n    images[Math.floor(Math.random() * images.length)].largeImageURL;\n\n  heroHeader.style.background = 'var(--primary-color)';\n  heroHeader.style.background = `linear-gradient(90deg, var(--primary-color) 0%, rgba(12,12,0,0.5) 10%, rgba(12,12,0,0.5) 90%, var(--primary-color) 100%), url(${imageURL})`;\n}\n","export default function preventItemsClick(items) {\n  document.querySelectorAll(items).forEach(item => {\n    item.addEventListener('click', event => event.preventDefault());\n  });\n}\n","import { apiConfig, config, imageAPI, imageGallary } from '../config';\nimport preventItemsClick from './preventItemsClick';\n\nexport default async function searchAndRender(input_value) {\n  try {\n    const response = await imageAPI.fetch({\n      query: input_value,\n    });\n\n    const { data } = response;\n\n    if (data.hits.length === 0) {\n      Notiflix.Notify.info(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`);\n\n    apiConfig.query = input_value;\n    apiConfig.page = 1;\n    config.reach_end = false;\n    config.isGalleryEnded = false;\n\n    if (data.totalHits > apiConfig.per_page) {\n      config.page += 1;\n    }\n\n    const links = imageGallary.createImageList(data.hits);\n\n    imageGallary.gallery.innerHTML = links;\n    preventItemsClick('.gallery__link');\n\n    imageGallary.galleryLightBox.refresh();\n  } catch (error) {\n    Notiflix.Notify.failure('Oops! Something went wrong');\n    console.error(error);\n  }\n}\n","import { API, PixabayAPI, ImageGallary } from '../class';\nimport MainSlider from '../components/MainSlider/MainSlider';\n\nexport const apiConfig = {\n  page: 1,\n  query: '',\n  per_page: 20,\n};\n\nexport const config = {\n  reach_end: false,\n  isGalleryEnded: false,\n};\n\nexport const imageAPI = new PixabayAPI(\n  new API({\n    baseURL: 'https://pixabay.com/api',\n    token: '35790595-0862ce34bbcdea66fb3b3d261',\n  })\n);\n\nexport const imageGallary = new ImageGallary(MainSlider);\n\nconst requests = [\n  'cat',\n  'forest',\n  'car',\n  'steampunk',\n  'ocean',\n  'flower',\n  'sunrise',\n  'moon',\n  'mountain',\n  'sunset',\n];\n\nexport const currentRequest =\n  requests[Math.floor(Math.random() * requests.length)];","import { apiConfig } from '../config/global';\n\nexport default class ImageAPI {\n  constructor(API) {\n    this.API = API;\n  }\n\n  async fetch({\n    query,\n    page = 1,\n    per_page,\n    safesearch = false,\n    image_type = 'photo',\n    orientation = 'horizontal',\n    category = '',\n  }) {\n    if (!per_page) per_page = apiConfig.per_page;\n\n    return await this.API.fetch({\n      query: {\n        key: this.API.token,\n        image_type,\n        orientation,\n        safesearch,\n        q: query,\n        page,\n        per_page,\n        category,\n      },\n    });\n  }\n}\n","export default class API {\n  constructor({ baseURL, token = '' }) {\n    this.baseURL = baseURL;\n    this.token = token;\n  }\n\n  async fetch({ api = '', query = {} }) {\n    const searchParams = new URLSearchParams(query);\n\n    const url = `${this.baseURL}${api}/?${searchParams}`;\n\n    return await axios.get(url);\n  }\n}\n","import { apiConfig, config, imageAPI } from '../config';\nimport { preventItemsClick } from '../utility';\n\nexport default class LightboxGallary {\n  constructor(sliderComponent) {\n    this.sliderComponent = sliderComponent;\n  }\n\n  createImageList(images) {\n    return images\n      .map(image => {\n        return this.sliderComponent(\n          image.webformatURL,\n          image.tags,\n          image.largeImageURL\n        );\n      })\n      .join('\\n');\n  }\n\n  init(gallerySelector) {\n    this.gallerySelector = gallerySelector;\n    this.gallery = document.querySelector(this.gallerySelector);\n    this.galleryLightBox = new SimpleLightbox(`${this.gallerySelector} a`, {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n\n  async add() {\n    try {\n      const response = await imageAPI.fetch({\n        query: apiConfig.query,\n        page: apiConfig.page,\n      });\n\n      const { data } = response;\n\n      if (!config.isGalleryEnded) {\n        if (\n          data.totalHits <=\n            apiConfig.per_page * (apiConfig.page - 1) + data.hits.length &&\n          config.reach_end\n        ) {\n          if (data.totalHits >= apiConfig.per_page)\n            Notiflix.Notify.info(\n              \"We're sorry, but you've reached the end of search results.\"\n            );\n          config.isGalleryEnded = true;\n        }\n\n        const links = this.createImageList(data.hits);\n\n        this.gallery.insertAdjacentHTML('beforeend', links);\n        preventItemsClick('.gallery__link');\n\n        this.galleryLightBox.refresh();\n      }\n    } catch (error) {\n      Notiflix.Notify.failure('Oops! Something went wrong');\n      console.error(error);\n    }\n  }\n}\n","export default function MainSlider(url, tags, largeURL) {\n  return `\n<a href=\"${url}\" class=\"gallery__link flex-container-item\">\n    <img src=\"${url}\" alt=\"${tags}\" loading=\"lazy\" data-source=\"${largeURL}\" />\n</a>\n`;\n}\n","import { apiConfig, config, currentRequest, imageGallary } from './js/config';\nimport {\n  initForms,\n  initHeroHeaderRandomBackground,\n  searchAndRender,\n} from './js/utility';\n\nconst imageSectionTop = document\n  .querySelector('.main-slider-section')\n  .getBoundingClientRect().top;\n\nconst anchor = document.querySelector('.anchor');\n\nfunction windowOnLoad() {\n  initHeroHeaderRandomBackground(currentRequest);\n  imageGallary.init('.gallery');\n  initForms('#search-form');\n  searchAndRender(currentRequest);\n\n  window.addEventListener(\n    'scroll',\n    _.throttle(() => {\n      if (\n        window.scrollY + innerHeight >= imageGallary.gallery.scrollHeight &&\n        !config.isGalleryEnded\n      ) {\n        apiConfig.page += 1;\n        imageGallary.add(apiConfig.query, apiConfig.page);\n        config.reach_end = true;\n      } else {\n        config.reach_end = false;\n      }\n      if (window.scrollY + innerHeight >= imageSectionTop + innerHeight * 1.5) {\n        !anchor.classList.contains('active') && anchor.classList.add('active');\n      } else {\n        anchor.classList.contains('active') &&\n          anchor.classList.remove('active');\n      }\n    }, 500)\n  );\n}\n\nwindow.addEventListener('load', windowOnLoad);\n"],"names":["$b02c3272c323d369$var$onSubmit","e","preventDefault","input_value","currentTarget","searchInput","value","trim","searchAndRender","$b02c3272c323d369$export$2e2bcd8739ae039","selector","document","querySelectorAll","forEach","form","addEventListener","bind","this","async","$40484a553eb920dd$export$2e2bcd8739ae039","request","heroHeader","querySelector","response","$763145494115d42c$export$b60708e9533f01d7","fetch","query","orientation","per_page","category","data","images","hits","imageURL","Math","floor","random","length","largeImageURL","style","background","$c7c6419eb0f6f661$export$2e2bcd8739ae039","items","item","event","$206ed2e2146524f6$export$2e2bcd8739ae039","Notiflix","Notify","info","success","totalHits","$763145494115d42c$export$60b54ddee76676c0","page","$763145494115d42c$export$e506a1d27d1eaa20","reach_end","isGalleryEnded","links","$763145494115d42c$export$a78e4d02e8e51c19","createImageList","gallery","innerHTML","galleryLightBox","refresh","error","failure","console","safesearch","image_type","API","key","token","q","constructor","api","searchParams","URLSearchParams","url","baseURL","axios","get","map","image","sliderComponent","webformatURL","tags","join","init","gallerySelector","SimpleLightbox","captionsData","captionDelay","insertAdjacentHTML","largeURL","$763145494115d42c$var$requests","$763145494115d42c$export$2f3eb88e3d22fa94","$1f0dc3b9307be026$var$imageSectionTop","getBoundingClientRect","top","$1f0dc3b9307be026$var$anchor","window","_","throttle","scrollY","innerHeight","scrollHeight","add","classList","contains","remove"],"version":3,"file":"index.afc4da2c.js.map"}