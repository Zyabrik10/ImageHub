{"mappings":"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","sources":["src/js/utility/preventItemsClick.js","src/js/config/global.js","src/js/class/PixabayAPI.js","src/js/class/API.js","src/js/class/LightboxGallary.js","src/index.js"],"sourcesContent":["export function preventItemsClick(items){\n    document.querySelectorAll(items).forEach(item => {\n      item.addEventListener('click', event => event.preventDefault());\n    });\n}","import { API, PixabayAPI, ImageGallary } from '../class';\n\nexport const apiConfig = {\n  page: 1,\n  query: '',\n  per_page: 20,\n};\n\nexport const config = {\n  reach_end: false,\n  isGalleryEnded: false,\n};\n\nexport const imageAPI = new PixabayAPI(\n  new API({\n    baseURL: 'https://pixabay.com/api',\n    token: '35790595-0862ce34bbcdea66fb3b3d261',\n  })\n);\n\nexport const imageGallary = new ImageGallary();\n","import { apiConfig } from '../config/global';\n\nexport default class ImageAPI {\n  constructor(API) {\n    this.API = API;\n  }\n\n  async fetch({\n    query,\n    page = 1,\n    per_page,\n    safesearch = false,\n    image_type = 'photo',\n    orientation = 'horizontal',\n  }) {\n    if (!per_page) per_page = apiConfig.per_page;\n\n    return await this.API.fetch({\n      query: {\n        key: this.API.token,\n        image_type,\n        orientation,\n        safesearch,\n        q: query,\n        page,\n        per_page,\n      },\n    });\n  }\n}\n","export default class API {\n  constructor({ baseURL, token = '' }) {\n    this.baseURL = baseURL;\n    this.token = token;\n  }\n\n  async fetch({ api = '', query = {} }) {\n    const searchParams = new URLSearchParams(query);\n\n    const url = `${this.baseURL}${api}/?${searchParams}`;\n\n    return await axios.get(url);\n  }\n}\n","import { apiConfig, config, imageAPI } from '../config';\nimport { preventItemsClick } from '../utility/preventItemsClick';\n\nexport default class LightboxGallary {\n  init(gallerySelector) {\n    this.gallerySelector = gallerySelector;\n    this.gallery = document.querySelector(this.gallerySelector);\n    this.galleryLightBox = new SimpleLightbox(`${this.gallerySelector} a`, {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n\n  initGalleryBox() {\n    this.galleryLightBox = new SimpleLightbox(`${this.gallerySelector} a`, {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n\n  async add() {\n    try {\n      const response = await imageAPI.fetch({\n        query: apiConfig.query,\n        page: apiConfig.page,\n      });\n\n      const { data } = response;\n\n      if (!config.isGalleryEnded) {\n        if (\n          data.totalHits <=\n            apiConfig.per_page * (apiConfig.page - 1) + data.hits.length &&\n          config.reach_end\n        ) {\n          if (data.totalHits >= apiConfig.per_page)\n            Notiflix.Notify.info(\n              \"We're sorry, but you've reached the end of search results.\"\n            );\n          config.isGalleryEnded = true;\n        }\n\n        const links = this.createImageList(data.hits);\n\n        this.gallery.insertAdjacentHTML('beforeend', links);\n        preventItemsClick('.gallery__link');\n\n        this.galleryLightBox.refresh();\n      }\n    } catch (error) {\n      Notiflix.Notify.failure('Oops! Something went wrong');\n      console.error(error);\n    }\n  }\n\n  createImageList(images) {\n    return images\n      .map(image => {\n        return `\n            <a href=\"${image.webformatURL}\" class=\"gallery__link flex-container-item\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" data-source=\"${image.largeImageURL}\" />\n            </a>\n        `;\n      })\n      .join('\\n');\n  }\n}\n","import { apiConfig, config, imageAPI, imageGallary } from './js/config';\nimport { preventItemsClick } from './js/utility/preventItemsClick';\n\nconst requests = [\n  'cat',\n  'forest',\n  'car',\n  'steampunk',\n  'clockpunk',\n  'ocean',\n  'flower',\n  'sunrise',\n  'moon',\n  'mountain',\n  'sunset',\n];\n\nconst currentRequest = requests[Math.floor(Math.random() * requests.length)];\n\nasync function initHeroHeaderRandomBackground() {\n  const heroHeader = document.querySelector('.hero-header');\n  const response = await imageAPI.fetch({\n    query: currentRequest,\n    orientation: 'horizontal',\n  });\n\n  const { data } = response;\n  const images = data.hits;\n\n  const imageURL =\n    images[Math.floor(Math.random() * images.length)].largeImageURL;\n\n  heroHeader.style.background = 'var(--primary-color)';\n  heroHeader.style.background = `linear-gradient(90deg, var(--primary-color) 0%, rgba(12,12,0,0.5) 10%, rgba(12,12,0,0.5) 90%, var(--primary-color) 100%), url(${imageURL})`;\n}\n\nasync function searchAndRender(input_value) {\n  try {\n    const response = await imageAPI.fetch({\n      query: input_value,\n    });\n\n    const { data } = response;\n\n    if (data.hits.length === 0) {\n      Notiflix.Notify.info(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`);\n\n    apiConfig.query = input_value;\n    apiConfig.page = 1;\n    config.reach_end = false;\n    config.isGalleryEnded = false;\n\n    if (data.totalHits > apiConfig.per_page) {\n      config.page += 1;\n    }\n\n    const links = imageGallary.createImageList(data.hits);\n\n    imageGallary.gallery.innerHTML = links;\n    preventItemsClick('.gallery__link');\n\n    imageGallary.initGalleryBox();\n  } catch (error) {\n    Notiflix.Notify.failure('Oops! Something went wrong');\n    console.error(error);\n  }\n\n  return this;\n}\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  let input_value = e.currentTarget.searchInput.value.trim();\n\n  searchAndRender(input_value);\n}\n\nfunction initForms(selector) {\n  const forms = document.querySelectorAll(selector);\n  forms.forEach(form => {\n    form.addEventListener('submit', onSubmit.bind(this));\n  });\n}\n\nfunction windowOnLoad() {\n  initHeroHeaderRandomBackground();\n  imageGallary.init('.gallery');\n  initForms('#search-form');\n  searchAndRender(currentRequest);\n\n  window.addEventListener(\n    'scroll',\n    _.throttle(() => {\n      if (\n        window.scrollY + innerHeight >= imageGallary.gallery.scrollHeight &&\n        !config.isGalleryEnded\n      ) {\n        apiConfig.page += 1;\n        imageGallary.add(apiConfig.query, apiConfig.page);\n        config.reach_end = true;\n      } else {\n        config.reach_end = false;\n      }\n    }, 500)\n  );\n}\n\nwindow.addEventListener('load', windowOnLoad);\n"],"names":["$c7c6419eb0f6f661$export$d8310f7a64c56e9a","items","document","querySelectorAll","forEach","item","addEventListener","event","preventDefault","$763145494115d42c$export$60b54ddee76676c0","page","query","per_page","$763145494115d42c$export$e506a1d27d1eaa20","reach_end","isGalleryEnded","$763145494115d42c$export$b60708e9533f01d7","async","safesearch","image_type","orientation","this","API","fetch","key","token","q","constructor","api","searchParams","URLSearchParams","url","baseURL","axios","get","$763145494115d42c$export$a78e4d02e8e51c19","init","gallerySelector","gallery","querySelector","galleryLightBox","SimpleLightbox","captionsData","captionDelay","initGalleryBox","response","data","totalHits","hits","length","Notiflix","Notify","info","links","createImageList","insertAdjacentHTML","refresh","error","failure","console","images","map","image","webformatURL","tags","largeImageURL","join","$1f0dc3b9307be026$var$requests","$1f0dc3b9307be026$var$currentRequest","Math","floor","random","$1f0dc3b9307be026$var$searchAndRender","input_value","success","innerHTML","$1f0dc3b9307be026$var$onSubmit","e","currentTarget","searchInput","value","trim","$1f0dc3b9307be026$var$initForms","selector","form","bind","window","heroHeader","imageURL","style","background","$1f0dc3b9307be026$var$initHeroHeaderRandomBackground","_","throttle","scrollY","innerHeight","scrollHeight","add"],"version":3,"file":"index.220538dd.js.map"}