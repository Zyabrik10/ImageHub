function e(e){document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",(e=>e.preventDefault()))}))}const t={page:1,query:""},a={reach_end:!1,isGalleryEnded:!1},i=new class{async fetch({api:e="",query:t={}}){const a=new URLSearchParams(t),i=`${this.baseURL}${e}/?${a}`;return await axios.get(i)}constructor({baseURL:e,token:t=""}){this.baseURL=e,this.token=t}}({baseURL:"https://pixabay.com/api",token:"35790595-0862ce34bbcdea66fb3b3d261"}),n=new class{init(e){this.form=document.querySelector(e),this.searchInput=this.form.input,this.form.addEventListener("submit",this.onSubmit.bind(this))}async search(){try{const i=this.searchInput.value.trim(),n=await o({query:i}),{data:s}=n;if(0===s.hits.length)return void Notiflix.Notify.info("Sorry, there are no images matching your search query. Please try again.");Notiflix.Notify.success(`Hooray! We found ${s.totalHits} images.`),t.query=i,t.page=1,a.reach_end=!1,a.isGalleryEnded=!1,s.totalHits>40&&(a.page+=1);const l=r.createImageList(s.hits);r.gallery.innerHTML=l,e(".gallery__link"),r.initGalleryBox()}catch(e){Notiflix.Notify.failure("Oops! Something went wrong"),console.error(e)}}onSubmit(e){e.preventDefault(),this.search()}constructor(){this.form=void 0}},r=new class{init(e){this.gallerySelector=e,this.gallery=document.querySelector(this.gallerySelector),this.galleryLightBox=new SimpleLightbox(`${this.gallerySelector} a`,{captionsData:"alt",captionDelay:250})}initGalleryBox(){this.galleryLightBox=new SimpleLightbox(`${this.gallerySelector} a`,{captionsData:"alt",captionDelay:250})}async add(){try{const i=await o({query:t.query,page:t.page}),{data:n}=i;if(!a.isGalleryEnded){if(n.totalHits<=40*(t.page-1)+n.hits.length&&a.reach_end)return n.totalHits>=40&&Notiflix.Notify.info("We're sorry, but you've reached the end of search results."),void(a.isGalleryEnded=!0);const i=this.createImageList(n.hits);this.gallery.insertAdjacentHTML("beforeend",i),e(".gallery__link"),this.galleryLightBox.refresh(),t.page+=1}}catch(e){Notiflix.Notify.failure("Oops! Something went wrong"),console.error(e)}}createImageList(e){return e.map((e=>`\n            <a href="${e.webformatURL}" class="gallery__link flex-container-item">\n                <img src="${e.webformatURL}" alt="${e.tags}" loading="lazy" data-source="${e.largeImageURL}" />\n                <div class="info">\n                    <p class="info-item">\n                        <b>Likes</b>\n                        ${e.likes}\n                    </p>\n                    <p class="info-item">\n                        <b>Views</b>\n                        ${e.views}\n                    </p>\n                    <p class="info-item">\n                        <b>Comments</b>\n                        ${e.comments}\n                    </p>\n                    <p class="info-item">\n                        <b>Downloads</b>\n                        ${e.downloads}\n                    </p>\n                </div>\n            </a>\n        `)).join("\n")}};async function o({query:e,page:t=1,per_page:a=40,safesearch:n=!1,image_type:r="photo",orientation:o="horizontal"}){return await i.fetch({query:{key:i.token,image_type:r,orientation:o,safesearch:n,q:e,page:t,per_page:a}})}window.addEventListener("load",(function(){n.init("#search-form"),r.init(".gallery"),window.addEventListener("scroll",_.throttle((()=>{window.scrollY+innerHeight>=r.gallery.scrollHeight?(console.log(r),r.add(t.query,t.page),a.reach_end=!0):a.reach_end=!1}),500))}));
//# sourceMappingURL=index.9df16fcf.js.map
