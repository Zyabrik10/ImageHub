{"mappings":"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","sources":["src/js/preventItemsClick.js","src/js/config/global.js","src/js/class/API.js","src/js/class/ImageForm.js","src/js/class/ImageGallary.js","src/js/utility/api/fetchImages.js","src/index.js"],"sourcesContent":["export function preventItemsClick(items){\n    document.querySelectorAll(items).forEach(item => {\n      item.addEventListener('click', event => event.preventDefault());\n    });\n}","import { API, ImageForm, ImageGallary } from '../class';\n\nexport const apiConfig = {\n  page: 1,\n  query: '',\n};\n\nexport const config = {\n  reach_end: false,\n  isGalleryEnded: false,\n};\n\nexport const imageAPI = new API({\n  baseURL: 'https://pixabay.com/api',\n  token: '35790595-0862ce34bbcdea66fb3b3d261',\n});\n\nexport const imageForm = new ImageForm();\nexport const imageGallary = new ImageGallary();\n","export default class API {\n  constructor({ baseURL, token = '' }) {\n    this.baseURL = baseURL;\n    this.token = token;\n  }\n\n  async fetch({ api = '', query = {} }) {\n    const searchParams = new URLSearchParams(query);\n\n    const url = `${this.baseURL}${api}/?${searchParams}`;\n\n    return await axios.get(url);\n  }\n}\n","import { apiConfig, config, imageGallary } from '../config';\nimport { preventItemsClick } from '../preventItemsClick';\nimport { fetchImages } from '../utility/api';\n\nexport default class ImageForm {\n  constructor() {\n    this.form = undefined;\n  }\n\n  init(selector) {\n    this.form = document.querySelector(selector);\n    this.searchInput = this.form.input;\n    this.form.addEventListener('submit', this.onSubmit.bind(this));\n  }\n\n  async search() {\n    try {\n      const input_value = this.searchInput.value.trim();\n      const response = await fetchImages({\n        query: input_value,\n      });\n\n      const { data } = response;\n\n      if (data.hits.length === 0) {\n        Notiflix.Notify.info(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n\n      Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`);\n\n      apiConfig.query = input_value;\n      apiConfig.page = 1;\n      config.reach_end = false;\n      config.isGalleryEnded = false;\n\n      if (data.totalHits > 40) {\n        config.page += 1;\n      }\n\n      const links = imageGallary.createImageList(data.hits);\n\n      imageGallary.gallery.innerHTML = links;\n      preventItemsClick('.gallery__link');\n\n      imageGallary.initGalleryBox();\n    } catch (error) {\n      Notiflix.Notify.failure('Oops! Something went wrong');\n      console.error(error);\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    this.search();\n  }\n}\n","import { apiConfig, config } from '../config';\nimport { preventItemsClick } from '../preventItemsClick';\nimport { fetchImages } from '../utility/api';\n\nexport default class ImageGallary {\n  init(gallerySelector) {\n    this.gallerySelector = gallerySelector;\n    this.gallery = document.querySelector(this.gallerySelector);\n    this.galleryLightBox = new SimpleLightbox(`${this.gallerySelector} a`, {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n\n  initGalleryBox() {\n    this.galleryLightBox = new SimpleLightbox(`${this.gallerySelector} a`, {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n\n  async add() {\n    try {\n      const response = await fetchImages({\n        query: apiConfig.query,\n        page: apiConfig.page,\n      });\n      const { data } = response;\n      if (!config.isGalleryEnded) {\n        if (\n          data.totalHits <= 40 * (apiConfig.page - 1) + data.hits.length &&\n          config.reach_end\n        ) {\n          if (data.totalHits >= 40)\n            Notiflix.Notify.info(\n              \"We're sorry, but you've reached the end of search results.\"\n            );\n          config.isGalleryEnded = true;\n          return;\n        }\n\n        const links = this.createImageList(data.hits);\n\n        this.gallery.insertAdjacentHTML('beforeend', links);\n        preventItemsClick('.gallery__link');\n\n        this.galleryLightBox.refresh();\n\n        apiConfig.page += 1;\n      }\n    } catch (error) {\n      Notiflix.Notify.failure('Oops! Something went wrong');\n      console.error(error);\n    }\n  }\n\n  createImageList(images) {\n    return images\n      .map(image => {\n        return `\n            <a href=\"${image.webformatURL}\" class=\"gallery__link flex-container-item\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" data-source=\"${image.largeImageURL}\" />\n                <div class=\"info\">\n                    <p class=\"info-item\">\n                        <b>Likes</b>\n                        ${image.likes}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Views</b>\n                        ${image.views}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Comments</b>\n                        ${image.comments}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Downloads</b>\n                        ${image.downloads}\n                    </p>\n                </div>\n            </a>\n        `;\n      })\n      .join('\\n');\n  }\n}\n","import { imageAPI } from '../../config';\n\nexport default async function fetchImages({\n  query,\n  page = 1,\n  per_page = 40,\n  safesearch = false,\n  image_type = 'photo',\n  orientation = 'horizontal',\n}) {\n  return await imageAPI.fetch({\n    query: {\n      key: imageAPI.token,\n      image_type,\n      orientation,\n      safesearch,\n      q: query,\n      page,\n      per_page,\n    },\n  });\n}\n","import { addImage, searchImage } from './js/utility/image/index.js';\nimport { apiConfig, config, imageForm, imageGallary } from './js/config';\n\nfunction windowOnLoad() {\n  imageForm.init('#search-form');\n  imageGallary.init('.gallery');\n\n  window.addEventListener(\n    'scroll',\n    _.throttle(() => {\n      if (window.scrollY + innerHeight >= imageGallary.gallery.scrollHeight) {\n        console.log(imageGallary);\n        imageGallary.add(apiConfig.query, apiConfig.page);\n        config.reach_end = true;\n      } else config.reach_end = false;\n    }, 500)\n  );\n}\n\nwindow.addEventListener('load', windowOnLoad);\n"],"names":["$0a5b7b32aa171984$export$d8310f7a64c56e9a","items","document","querySelectorAll","forEach","item","addEventListener","event","preventDefault","$763145494115d42c$export$60b54ddee76676c0","page","query","$763145494115d42c$export$e506a1d27d1eaa20","reach_end","isGalleryEnded","$763145494115d42c$export$b60708e9533f01d7","async","api","searchParams","URLSearchParams","url","this","baseURL","axios","get","constructor","token","$763145494115d42c$export$e124ce1d5dd01885","init","selector","form","querySelector","searchInput","input","onSubmit","bind","input_value","value","trim","response","$2770ef3105987a6e$export$2e2bcd8739ae039","data","hits","length","Notiflix","Notify","info","success","totalHits","links","$763145494115d42c$export$a78e4d02e8e51c19","createImageList","gallery","innerHTML","initGalleryBox","error","failure","console","e","search","undefined","gallerySelector","galleryLightBox","SimpleLightbox","captionsData","captionDelay","insertAdjacentHTML","refresh","images","map","image","webformatURL","tags","largeImageURL","likes","views","comments","downloads","join","per_page","safesearch","image_type","orientation","fetch","key","q","window","_","throttle","scrollY","innerHeight","scrollHeight","log","add"],"version":3,"file":"index.9df16fcf.js.map"}