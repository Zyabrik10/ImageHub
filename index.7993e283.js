function e(e){document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",(e=>e.preventDefault()))}))}async function t({query:e,page:t=1,per_page:a=40,safesearch:i=!1,image_type:n="photo",orientation:o="horizontal"}){return await r.fetch({query:{key:r.token,image_type:n,orientation:o,safesearch:i,q:e,page:t,per_page:a}})}const a={page:1,query:""},i={reach_end:!1,isGalleryEnded:!1},r=new class{async fetch({api:e="",query:t={}}){const a=new URLSearchParams(t),i=`${this.baseURL}${e}/?${a}`;return await axios.get(i)}constructor({baseURL:e,token:t=""}){this.baseURL=e,this.token=t}}({baseURL:"https://pixabay.com/api",token:"35790595-0862ce34bbcdea66fb3b3d261"}),n=new class{init(e){this.form=document.querySelector(e),this.searchInput=this.form.input,this.form.addEventListener("submit",this.onSubmit.bind(this))}async search(r){try{let n=this.searchInput.value.trim();""===n&&(n=r);const s=await t({query:n}),{data:l}=s;if(0===l.hits.length)return void Notiflix.Notify.info("Sorry, there are no images matching your search query. Please try again.");Notiflix.Notify.success(`Hooray! We found ${l.totalHits} images.`),a.query=n,a.page=1,i.reach_end=!1,i.isGalleryEnded=!1,l.totalHits>40&&(i.page+=1);const c=o.createImageList(l.hits);o.gallery.innerHTML=c,e(".gallery__link"),o.initGalleryBox()}catch(e){Notiflix.Notify.failure("Oops! Something went wrong"),console.error(e)}}onSubmit(e){e.preventDefault(),this.search()}constructor(){this.form=void 0}},o=new class{init(e){this.gallerySelector=e,this.gallery=document.querySelector(this.gallerySelector),this.galleryLightBox=new SimpleLightbox(`${this.gallerySelector} a`,{captionsData:"alt",captionDelay:250})}initGalleryBox(){this.galleryLightBox=new SimpleLightbox(`${this.gallerySelector} a`,{captionsData:"alt",captionDelay:250})}async add(){try{const r=await t({query:a.query,page:a.page}),{data:n}=r;if(!i.isGalleryEnded){if(n.totalHits<=40*(a.page-1)+n.hits.length&&i.reach_end)return n.totalHits>=40&&Notiflix.Notify.info("We're sorry, but you've reached the end of search results."),void(i.isGalleryEnded=!0);const t=this.createImageList(n.hits);this.gallery.insertAdjacentHTML("beforeend",t),e(".gallery__link"),this.galleryLightBox.refresh(),a.page+=1}}catch(e){Notiflix.Notify.failure("Oops! Something went wrong"),console.error(e)}}createImageList(e){return e.map((e=>`\n            <a href="${e.webformatURL}" class="gallery__link flex-container-item">\n                <img src="${e.webformatURL}" alt="${e.tags}" loading="lazy" data-source="${e.largeImageURL}" />\n            </a>\n        `)).join("\n")}};window.addEventListener("load",(function(){n.init("#search-form"),o.init(".gallery"),n.search("cats"),window.addEventListener("scroll",_.throttle((()=>{window.scrollY+innerHeight>=o.gallery.scrollHeight?(o.add(a.query,a.page),i.reach_end=!0):i.reach_end=!1}),500))}));
//# sourceMappingURL=index.7993e283.js.map
