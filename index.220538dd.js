function e(e){document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",(e=>e.preventDefault()))}))}const t={page:1,query:"",per_page:20},a={reach_end:!1,isGalleryEnded:!1},r=new class{async fetch({query:e,page:a=1,per_page:r,safesearch:n=!1,image_type:i="photo",orientation:o="horizontal"}){return r||(r=t.per_page),await this.API.fetch({query:{key:this.API.token,image_type:i,orientation:o,safesearch:n,q:e,page:a,per_page:r}})}constructor(e){this.API=e}}(new class{async fetch({api:e="",query:t={}}){const a=new URLSearchParams(t),r=`${this.baseURL}${e}/?${a}`;return await axios.get(r)}constructor({baseURL:e,token:t=""}){this.baseURL=e,this.token=t}}({baseURL:"https://pixabay.com/api",token:"35790595-0862ce34bbcdea66fb3b3d261"})),n=new class{init(e){this.gallerySelector=e,this.gallery=document.querySelector(this.gallerySelector),this.galleryLightBox=new SimpleLightbox(`${this.gallerySelector} a`,{captionsData:"alt",captionDelay:250})}initGalleryBox(){this.galleryLightBox=new SimpleLightbox(`${this.gallerySelector} a`,{captionsData:"alt",captionDelay:250})}async add(){try{const n=await r.fetch({query:t.query,page:t.page}),{data:i}=n;if(!a.isGalleryEnded){i.totalHits<=t.per_page*(t.page-1)+i.hits.length&&a.reach_end&&(i.totalHits>=t.per_page&&Notiflix.Notify.info("We're sorry, but you've reached the end of search results."),a.isGalleryEnded=!0);const r=this.createImageList(i.hits);this.gallery.insertAdjacentHTML("beforeend",r),e(".gallery__link"),this.galleryLightBox.refresh()}}catch(e){Notiflix.Notify.failure("Oops! Something went wrong"),console.error(e)}}createImageList(e){return e.map((e=>`\n            <a href="${e.webformatURL}" class="gallery__link flex-container-item">\n                <img src="${e.webformatURL}" alt="${e.tags}" loading="lazy" data-source="${e.largeImageURL}" />\n            </a>\n        `)).join("\n")}},i=["cat","forest","car","steampunk","clockpunk","ocean","flower","sunrise","moon","mountain","sunset"],o=i[Math.floor(Math.random()*i.length)];async function l(i){try{const o=await r.fetch({query:i}),{data:l}=o;if(0===l.hits.length)return void Notiflix.Notify.info("Sorry, there are no images matching your search query. Please try again.");Notiflix.Notify.success(`Hooray! We found ${l.totalHits} images.`),t.query=i,t.page=1,a.reach_end=!1,a.isGalleryEnded=!1,l.totalHits>t.per_page&&(a.page+=1);const s=n.createImageList(l.hits);n.gallery.innerHTML=s,e(".gallery__link"),n.initGalleryBox()}catch(e){Notiflix.Notify.failure("Oops! Something went wrong"),console.error(e)}return this}function s(e){e.preventDefault(),l(e.currentTarget.searchInput.value.trim())}function c(e){document.querySelectorAll(e).forEach((e=>{e.addEventListener("submit",s.bind(this))}))}window.addEventListener("load",(function(){!async function(){const e=document.querySelector(".hero-header"),t=await r.fetch({query:o,orientation:"horizontal"}),{data:a}=t,n=a.hits,i=n[Math.floor(Math.random()*n.length)].largeImageURL;e.style.background="var(--primary-color)",e.style.background=`linear-gradient(90deg, var(--primary-color) 0%, rgba(12,12,0,0.5) 10%, rgba(12,12,0,0.5) 90%, var(--primary-color) 100%), url(${i})`}(),n.init(".gallery"),c("#search-form"),l(o),window.addEventListener("scroll",_.throttle((()=>{window.scrollY+innerHeight>=n.gallery.scrollHeight&&!a.isGalleryEnded?(t.page+=1,n.add(t.query,t.page),a.reach_end=!0):a.reach_end=!1}),500))}));
//# sourceMappingURL=index.220538dd.js.map
