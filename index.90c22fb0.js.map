{"mappings":"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","sources":["src/js/utility/preventItemsClick.js","src/js/utility/searchAndRender.js","src/js/utility/initForms.js","src/js/utility/initHeroHeaderRandomBackground.js","src/js/config/global.js","src/js/class/PixabayAPI.js","src/js/class/API.js","src/js/class/LightboxGallary.js","src/js/components/MainSlider/MainSlider.js","src/index.js"],"sourcesContent":["export default function preventItemsClick(items) {\n  document.querySelectorAll(items).forEach(item => {\n    item.addEventListener('click', event => event.preventDefault());\n  });\n}\n","import { apiConfig, config, imageAPI, imageGallary } from '../config';\nimport preventItemsClick from './preventItemsClick';\n\nexport default async function searchAndRender(input_value) {\n  try {\n    const response = await imageAPI.fetch({\n      query: input_value,\n    });\n\n    const { data } = response;\n\n    if (data.hits.length === 0) {\n      Notiflix.Notify.info(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`);\n\n    apiConfig.query = input_value;\n    apiConfig.page = 1;\n    config.reach_end = false;\n    config.isGalleryEnded = false;\n\n    if (data.totalHits > apiConfig.per_page) {\n      config.page += 1;\n    }\n\n    const links = imageGallary.createImageList(data.hits);\n\n    imageGallary.gallery.innerHTML = links;\n    preventItemsClick('.gallery__link');\n\n    imageGallary.galleryLightBox.refresh();\n  } catch (error) {\n    Notiflix.Notify.failure('Oops! Something went wrong');\n    console.error(error);\n  }\n}\n","import searchAndRender from \"./searchAndRender.js\";\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  let input_value = e.currentTarget.searchInput.value.trim();\n\n  searchAndRender(input_value);\n}\n\nexport default function initForms(selector) {\n  const forms = document.querySelectorAll(selector);\n  forms.forEach(form => {\n    form.addEventListener('submit', onSubmit.bind(this));\n  });\n}\n","import { imageAPI } from '../config';\n\nexport default async function initHeroHeaderRandomBackground(request) {\n  const heroHeader = document.querySelector('.hero-header');\n  const response = await imageAPI.fetch({\n    query: request,\n    orientation: 'horizontal',\n    per_page: 10,\n    category: request,\n  });\n\n  const { data } = response;\n  const images = data.hits;\n\n  const imageURL =\n    images[Math.floor(Math.random() * images.length)].largeImageURL;\n\n  heroHeader.style.background = 'var(--primary-color)';\n  heroHeader.style.background = `linear-gradient(90deg, var(--primary-color) 0%, rgba(12,12,0,0.5) 10%, rgba(12,12,0,0.5) 90%, var(--primary-color) 100%), url(${imageURL})`;\n}\n","import { API, PixabayAPI, ImageGallary } from '../class';\nimport MainSlider from '../components/MainSlider/MainSlider';\n\nexport const apiConfig = {\n  page: 1,\n  query: '',\n  per_page: 20,\n};\n\nexport const config = {\n  reach_end: false,\n  isGalleryEnded: false,\n};\n\nexport const imageAPI = new PixabayAPI(\n  new API({\n    baseURL: 'https://pixabay.com/api',\n    token: '35790595-0862ce34bbcdea66fb3b3d261',\n  })\n);\n\nexport const imageGallary = new ImageGallary(MainSlider);\n\nconst requests = [\n  'cat',\n  'forest',\n  'car',\n  'steampunk',\n  'ocean',\n  'flower',\n  'sunrise',\n  'moon',\n  'mountain',\n  'sunset',\n];\n\nexport const currentRequest =\n  requests[Math.floor(Math.random() * requests.length)];","import { apiConfig } from '../config/global';\n\nexport default class PixabayAPI {\n  constructor(API) {\n    this.API = API;\n  }\n\n  async fetch({\n    query,\n    page = 1,\n    per_page,\n    safesearch = false,\n    image_type = 'photo',\n    orientation = 'horizontal',\n    category = '',\n  }) {\n    if (!per_page) per_page = apiConfig.per_page;\n\n    return await this.API.fetch({\n      query: {\n        key: this.API.token,\n        image_type,\n        orientation,\n        safesearch,\n        q: query,\n        page,\n        per_page,\n        category,\n      },\n    });\n  }\n}\n","export default class API {\n  constructor({ baseURL, token = '' }) {\n    this.baseURL = baseURL;\n    this.token = token;\n  }\n\n  async fetch({ api = '', query = {} }) {\n    const searchParams = new URLSearchParams(query);\n\n    const url = `${this.baseURL}${api}/?${searchParams}`;\n\n    return await axios.get(url);\n  }\n}\n","import { apiConfig, config, imageAPI } from '../config';\nimport { preventItemsClick } from '../utility';\n\nexport default class LightboxGallary {\n  constructor(sliderComponent) {\n    this.sliderComponent = sliderComponent;\n  }\n\n  createImageList(images) {\n    return images\n      .map(image => {\n        return this.sliderComponent(\n          image.webformatURL,\n          image.tags,\n          image.largeImageURL\n        );\n      })\n      .join('\\n');\n  }\n\n  init(gallerySelector) {\n    this.gallerySelector = gallerySelector;\n    this.gallery = document.querySelector(this.gallerySelector);\n    this.galleryLightBox = new SimpleLightbox(`${this.gallerySelector} a`, {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n\n  async add() {\n    try {\n      const response = await imageAPI.fetch({\n        query: apiConfig.query,\n        page: apiConfig.page,\n      });\n\n      const { data } = response;\n\n      if (!config.isGalleryEnded) {\n        if (\n          data.totalHits <=\n            apiConfig.per_page * (apiConfig.page - 1) + data.hits.length &&\n          config.reach_end\n        ) {\n          if (data.totalHits >= apiConfig.per_page)\n            Notiflix.Notify.info(\n              \"We're sorry, but you've reached the end of search results.\"\n            );\n          config.isGalleryEnded = true;\n        }\n\n        const links = this.createImageList(data.hits);\n\n        this.gallery.insertAdjacentHTML('beforeend', links);\n        preventItemsClick('.gallery__link');\n\n        this.galleryLightBox.refresh();\n      }\n    } catch (error) {\n      Notiflix.Notify.failure('Oops! Something went wrong');\n      console.error(error);\n    }\n  }\n}\n","export default function MainSlider(url, tags, largeURL) {\n  return `\n<a href=\"${url}\" class=\"gallery__link flex-container-item\">\n    <img src=\"${url}\" alt=\"${tags}\" loading=\"lazy\" data-source=\"${largeURL}\" />\n</a>\n`;\n}\n","import { apiConfig, config, currentRequest, imageGallary } from './js/config';\nimport {\n  initForms,\n  initHeroHeaderRandomBackground,\n  searchAndRender,\n} from './js/utility';\n\nconst imageSectionTop = document\n  .querySelector('.main-slider-section')\n  .getBoundingClientRect().top;\n\nconst anchor = document.querySelector('.anchor');\n\nfunction windowOnLoad() {\n  initHeroHeaderRandomBackground(currentRequest);\n  imageGallary.init('.gallery');\n  initForms('#search-form');\n  searchAndRender(currentRequest);\n\n  window.addEventListener(\n    'scroll',\n    _.throttle(() => {\n      if (\n        window.scrollY + innerHeight >= imageGallary.gallery.scrollHeight &&\n        !config.isGalleryEnded\n      ) {\n        apiConfig.page += 1;\n        imageGallary.add(apiConfig.query, apiConfig.page);\n        config.reach_end = true;\n      } else {\n        config.reach_end = false;\n      }\n      if (window.scrollY + innerHeight >= imageSectionTop + innerHeight * 1.5) {\n        !anchor.classList.contains('active') && anchor.classList.add('active');\n      } else {\n        anchor.classList.contains('active') &&\n          anchor.classList.remove('active');\n      }\n    }, 500)\n  );\n}\n\nwindow.addEventListener('load', windowOnLoad);\n"],"names":["$c7c6419eb0f6f661$export$2e2bcd8739ae039","items","document","querySelectorAll","forEach","item","addEventListener","event","preventDefault","async","$206ed2e2146524f6$export$2e2bcd8739ae039","input_value","response","$763145494115d42c$export$b60708e9533f01d7","fetch","query","data","hits","length","Notiflix","Notify","info","success","totalHits","$763145494115d42c$export$60b54ddee76676c0","page","$763145494115d42c$export$e506a1d27d1eaa20","reach_end","isGalleryEnded","per_page","links","$763145494115d42c$export$a78e4d02e8e51c19","createImageList","gallery","innerHTML","galleryLightBox","refresh","error","failure","console","$b02c3272c323d369$var$onSubmit","e","currentTarget","searchInput","value","trim","$b02c3272c323d369$export$2e2bcd8739ae039","selector","form","bind","this","$40484a553eb920dd$export$2e2bcd8739ae039","request","heroHeader","querySelector","orientation","category","images","imageURL","Math","floor","random","largeImageURL","style","background","safesearch","image_type","API","key","token","q","constructor","api","searchParams","URLSearchParams","url","baseURL","axios","get","map","image","sliderComponent","webformatURL","tags","join","init","gallerySelector","SimpleLightbox","captionsData","captionDelay","insertAdjacentHTML","largeURL","$763145494115d42c$var$requests","$763145494115d42c$export$2f3eb88e3d22fa94","$1f0dc3b9307be026$var$imageSectionTop","getBoundingClientRect","top","$1f0dc3b9307be026$var$anchor","window","_","throttle","scrollY","innerHeight","scrollHeight","add","classList","contains","remove"],"version":3,"file":"index.90c22fb0.js.map"}